{
    "server": {
        "main": {
            "logFile": "console:/dev/stderr",
            "logLevel": "trace",
            "singleflight": true
        },
        "listen": [
            {"addr": "127.0.1.2:53", "network": "tcp", "protocol": "dns"},
            {"addr": "127.0.1.2:53", "network": "udp", "protocol": "dns"},
            {"addr": "127.0.1.2:443", "network": "tcp", "protocol": "https", "tls_config": {}},
            {"addr": "127.0.1.2:853", "network": "tcp", "protocol": "tls-tcp", "tls_config": {}}
        ],
        "nameserver": {
            "tag_doh_cf_json_01": {"protocol": "https", "doh": {"url": "https://1.1.1.1/dns-query", "method": "GET", "headers": {"content-type": ["application/dns-json"]}, "format": "JSON", "externalNameServers": ["8.8.8.8:53"], "tls_config": {"serverName": "1.1.1.1"}, "timeout": {"connect": "5s", "read": "5s", "write": "5s"}, "dns_opt": {"dnssec": false, "ecs": false, "randomDomain": true}}},
            "tag_doh_cf_rfc8484_01": {"protocol": "https", "doh": {"url": "https://1.1.1.1/dns-query", "method": "POST", "headers": {"content-type": ["application/dns-message"]}, "format": "RFC8484", "externalNameServers": ["8.8.8.8:53"], "tls_config": {"serverName": "1.1.1.1"}, "timeout": {"connect": "5s", "read": "5s", "write": "5s"}, "dns_opt": {"dnssec": false, "ecs": false, "randomDomain": true}}},
            "tag_doh_cf_rfc8484_01_one": {"protocol": "https", "doh": {"url": "https://one.one.one.one/dns-query", "method": "POST", "headers": {"content-type": ["application/dns-message"]}, "format": "RFC8484", "externalNameServers": ["8.8.8.8:53"], "tls_config": {"serverName": "1.1.1.1"}, "timeout": {"connect": "5s", "read": "5s", "write": "5s"}, "dns_opt": {"dnssec": false, "ecs": false, "randomDomain": true}}},
            "tag_dns_8": {"protocol": "dns", "dns": {"server": "8.8.8.8:53", "protocol": "udp", "timeout": {"connect": "5s", "read": "5s", "write": "5s"}, "dns_opt": {"dnssec": false, "ecs": false, "randomDomain": true}}},
            "tag_dot_cf": {"protocol": "tls-tcp", "dot": {"server": "1.1.1.1:853",  "tls_config": {"serverName": "1.1.1.1"}, "timeout": {"connect": "5s", "read": "5s", "write": "5s"}, "dns_opt": {}}},
            "tag_dot_cf_one": {"protocol": "tls-tcp", "dot": {"server": "one.one.one.one:853",  "tls_config": {"serverName": "1.1.1.1"}, "timeout": {"connect": "5s", "read": "5s", "write": "5s"}, "dns_opt": {}}},
            "tag_grpc": {"protocol": "grpc", "grpc": {"timeout": {}, "dns_opt": {}}}
        },
        "view": {
            ".": {"resolve_type": "forward", "nameserver_tag": "tag_dns_8"},
            "twitter.com.": {"resolve_type": "forward", "nameserver_tag": "tag_doh_cf_json_01"},
            "www.twitter.com.": {"resolve_type": "forward", "nameserver_tag": "tag_dot_cf"},
            "github.io.": {"resolve_type": "forward", "nameserver_tag": "tag_doh_cf_rfc8484_01", "cname": "cname.github.io."},
            "www.github.com.": {"resolve_type": "forward", "nameserver_tag": "tag_doh_cf_rfc8484_01_one"},
            "github.com.": {"resolve_type": "forward", "nameserver_tag": "tag_dot_cf_one"}
        },
        "hosts": [
            {"name": "localhost.", "record": "127.0.0.1", "qtype": "A"},
            {"name": "local.github.io.", "record": "127.0.0.3", "qtype": "A"}
        ],
        "cache": {
            "minTTL": 60,
            "maxTTL": 60,
            "backGroundUpdate": true,
            "beforeExpiredSecond": 30,
            "useSteal": true
        }
    },
    "query": {
        "whitelist": {
            "A": {
                "equal": [],
                "prefix": [],
                "suffix": [],
                "contain": [],
                "regexp": []
            }
        },
        "blacklist": {
            "A": {
                "equal": [],
                "prefix": [],
                "suffix": ["adobe.io."],
                "contain": [".ad."],
                "regexp": ["\\d{5,63}"]
            },
            "AAAA": {
                "equal": [],
                "prefix": [],
                "suffix": ["adobe.io."],
                "contain": [".ad."],
                "regexp": ["\\d{5,63}"]
            }
        }
    },
    "admin": {
        "listen": [
            {"addr": "127.0.1.2:6677", "network": "tcp", "protocol": "http", "tls_config": {}}
        ],
        "auth": {
            "cidr": ["192.168.0.0/16", "10.0.0.1/8", "127.0.0.1/8", "172.16.0.0/12", "7.0.0.0/8"],
            "token": {"user": "password"}
        }
    },
    "files": {
        "ecs_iplist": "./ip.list"
    }
}